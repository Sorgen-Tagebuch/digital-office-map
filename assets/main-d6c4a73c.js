class C{constructor(e){this.properties=e??[]}get(e){const t=this.properties.filter(n=>n.name===e).map(n=>n.value);if(t.length>1)throw new Error('Expected only one property to be named "'+e+'"');if(t.length!==0)return t[0]}getString(e){return this.getByType(e,"string")}getNumber(e){return this.getByType(e,"number")}getBoolean(e){return this.getByType(e,"boolean")}getByType(e,t){const n=this.get(e);if(n!==void 0){if(t!=="json"&&typeof n!==t)throw new Error('Expected property "'+e+'" to have type "'+t+'"');return n}}mustGetString(e){return this.mustGetByType(e,"string")}mustGetNumber(e){return this.mustGetByType(e,"number")}mustGetBoolean(e){return this.mustGetByType(e,"boolean")}mustGetByType(e,t){const n=this.get(e);if(n===void 0)throw new Error('Property "'+e+'" is missing');if(t!=="json"&&typeof n!==t)throw new Error('Expected property "'+e+'" to have type "'+t+'"');return n}getType(e){const t=this.properties.filter(n=>n.name===e).map(n=>n.type);if(t.length>1)throw new Error('Expected only one property to be named "'+e+'"');if(t.length!==0)return t[0]}}const j="https://unpkg.com/@workadventure/scripting-api-extra@1.4.6/dist";class te{constructor(e){this.name=e.name,this.x=e.x,this.y=e.y,this.properties=new C(e.properties)}get isReadable(){const e=this.properties.getString("readableBy");return e?WA.player.tags.includes(e):!0}get isWritable(){const e=this.properties.getString("writableBy");return e?WA.player.tags.includes(e):!0}}function O(r){const e=r?"#"+r.join():"";WA.nav.openCoWebSite(j+"/configuration.html"+e)}async function re(r,e){const t=await WA.room.getTiledMap(),n=new Map;return H(t.layers,n,r,e),n}function H(r,e,t,n){for(const o of r)if(o.type==="objectgroup"){for(const s of o.objects)if(s.type==="variable"||s.class==="variable"){if(t&&o.name!==t||n&&!n.includes(s.name))continue;e.set(s.name,new te(s))}}else o.type==="group"&&H(o.layers,e,t,n)}let D;async function T(){return D===void 0&&(D=ne()),D}async function ne(){return oe(await WA.room.getTiledMap())}function oe(r){const e=new Map;return $(r.layers,"",e),e}function $(r,e,t){for(const n of r)n.type==="group"?$(n.layers,e+n.name+"/",t):(n.name=e+n.name,t.set(n.name,n))}async function se(){const r=await T(),e=[];for(const t of r.values())if(t.type==="objectgroup")for(const n of t.objects)(n.type==="area"||n.class==="area")&&e.push(n);return e}function ae(r){let e=1/0,t=1/0,n=0,o=0;const s=r.data;if(typeof s=="string")throw new Error("Unsupported tile layer data stored as string instead of CSV");for(let a=0;a<r.height;a++)for(let i=0;i<r.width;i++)s[i+a*r.width]!==0&&(e=Math.min(e,i),o=Math.max(o,i),t=Math.min(t,a),n=Math.max(n,a));return{top:t,left:e,right:o+1,bottom:n+1}}function X(r){let e=1/0,t=1/0,n=0,o=0;for(const s of r){const a=ae(s);a.left<e&&(e=a.left),a.top<t&&(t=a.top),a.right>o&&(o=a.right),a.bottom>n&&(n=a.bottom)}return{top:t,left:e,right:o,bottom:n}}/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var ie=Object.prototype.toString,P=Array.isArray||function(e){return ie.call(e)==="[object Array]"};function x(r){return typeof r=="function"}function ue(r){return P(r)?"array":typeof r}function G(r){return r.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function z(r,e){return r!=null&&typeof r=="object"&&e in r}function ce(r,e){return r!=null&&typeof r!="object"&&r.hasOwnProperty&&r.hasOwnProperty(e)}var le=RegExp.prototype.test;function pe(r,e){return le.call(r,e)}var fe=/\S/;function ge(r){return!pe(fe,r)}var he={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function de(r){return String(r).replace(/[&<>"'`=\/]/g,function(t){return he[t]})}var ye=/\s*/,be=/\s+/,F=/\s*=/,me=/\s*\}/,ve=/#|\^|\/|>|\{|&|=|!/;function Ae(r,e){if(!r)return[];var t=!1,n=[],o=[],s=[],a=!1,i=!1,u="",l=0;function p(){if(a&&!i)for(;s.length;)delete o[s.pop()];else s=[];a=!1,i=!1}var y,m,B;function L(w){if(typeof w=="string"&&(w=w.split(be,2)),!P(w)||w.length!==2)throw new Error("Invalid tags: "+w);y=new RegExp(G(w[0])+"\\s*"),m=new RegExp("\\s*"+G(w[1])),B=new RegExp("\\s*"+G("}"+w[1]))}L(e||d.tags);for(var c=new M(r),v,g,b,E,R,W;!c.eos();){if(v=c.pos,b=c.scanUntil(y),b)for(var V=0,ee=b.length;V<ee;++V)E=b.charAt(V),ge(E)?(s.push(o.length),u+=E):(i=!0,t=!0,u+=" "),o.push(["text",E,v,v+1]),v+=1,E===`
`&&(p(),u="",l=0,t=!1);if(!c.scan(y))break;if(a=!0,g=c.scan(ve)||"name",c.scan(ye),g==="="?(b=c.scanUntil(F),c.scan(F),c.scanUntil(m)):g==="{"?(b=c.scanUntil(B),c.scan(me),c.scanUntil(m),g="&"):b=c.scanUntil(m),!c.scan(m))throw new Error("Unclosed tag at "+c.pos);if(g==">"?R=[g,b,v,c.pos,u,l,t]:R=[g,b,v,c.pos],l++,o.push(R),g==="#"||g==="^")n.push(R);else if(g==="/"){if(W=n.pop(),!W)throw new Error('Unopened section "'+b+'" at '+v);if(W[1]!==b)throw new Error('Unclosed section "'+W[1]+'" at '+v)}else g==="name"||g==="{"||g==="&"?i=!0:g==="="&&L(b)}if(p(),W=n.pop(),W)throw new Error('Unclosed section "'+W[1]+'" at '+c.pos);return We(we(o))}function we(r){for(var e=[],t,n,o=0,s=r.length;o<s;++o)t=r[o],t&&(t[0]==="text"&&n&&n[0]==="text"?(n[1]+=t[1],n[3]=t[3]):(e.push(t),n=t));return e}function We(r){for(var e=[],t=e,n=[],o,s,a=0,i=r.length;a<i;++a)switch(o=r[a],o[0]){case"#":case"^":t.push(o),n.push(o),t=o[4]=[];break;case"/":s=n.pop(),s[5]=o[2],t=n.length>0?n[n.length-1][4]:e;break;default:t.push(o)}return e}function M(r){this.string=r,this.tail=r,this.pos=0}M.prototype.eos=function(){return this.tail===""};M.prototype.scan=function(e){var t=this.tail.match(e);if(!t||t.index!==0)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n};M.prototype.scanUntil=function(e){var t=this.tail.search(e),n;switch(t){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,t),this.tail=this.tail.substring(t)}return this.pos+=n.length,n};function S(r,e){this.view=r,this.cache={".":this.view},this.parent=e}S.prototype.push=function(e){return new S(e,this)};S.prototype.lookup=function(e){var t=this.cache,n;if(t.hasOwnProperty(e))n=t[e];else{for(var o=this,s,a,i,u=!1;o;){if(e.indexOf(".")>0)for(s=o.view,a=e.split("."),i=0;s!=null&&i<a.length;)i===a.length-1&&(u=z(s,a[i])||ce(s,a[i])),s=s[a[i++]];else s=o.view[e],u=z(o.view,e);if(u){n=s;break}o=o.parent}t[e]=n}return x(n)&&(n=n.call(this.view)),n};function f(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}f.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};f.prototype.parse=function(e,t){var n=this.templateCache,o=e+":"+(t||d.tags).join(":"),s=typeof n<"u",a=s?n.get(o):void 0;return a==null&&(a=Ae(e,t),s&&n.set(o,a)),a};f.prototype.render=function(e,t,n,o){var s=this.getConfigTags(o),a=this.parse(e,s),i=t instanceof S?t:new S(t,void 0);return this.renderTokens(a,i,n,e,o)};f.prototype.renderTokens=function(e,t,n,o,s){for(var a="",i,u,l,p=0,y=e.length;p<y;++p)l=void 0,i=e[p],u=i[0],u==="#"?l=this.renderSection(i,t,n,o,s):u==="^"?l=this.renderInverted(i,t,n,o,s):u===">"?l=this.renderPartial(i,t,n,s):u==="&"?l=this.unescapedValue(i,t):u==="name"?l=this.escapedValue(i,t,s):u==="text"&&(l=this.rawValue(i)),l!==void 0&&(a+=l);return a};f.prototype.renderSection=function(e,t,n,o,s){var a=this,i="",u=t.lookup(e[1]);function l(m){return a.render(m,t,n,s)}if(u){if(P(u))for(var p=0,y=u.length;p<y;++p)i+=this.renderTokens(e[4],t.push(u[p]),n,o,s);else if(typeof u=="object"||typeof u=="string"||typeof u=="number")i+=this.renderTokens(e[4],t.push(u),n,o,s);else if(x(u)){if(typeof o!="string")throw new Error("Cannot use higher-order sections without the original template");u=u.call(t.view,o.slice(e[3],e[5]),l),u!=null&&(i+=u)}else i+=this.renderTokens(e[4],t,n,o,s);return i}};f.prototype.renderInverted=function(e,t,n,o,s){var a=t.lookup(e[1]);if(!a||P(a)&&a.length===0)return this.renderTokens(e[4],t,n,o,s)};f.prototype.indentPartial=function(e,t,n){for(var o=t.replace(/[^ \t]/g,""),s=e.split(`
`),a=0;a<s.length;a++)s[a].length&&(a>0||!n)&&(s[a]=o+s[a]);return s.join(`
`)};f.prototype.renderPartial=function(e,t,n,o){if(n){var s=this.getConfigTags(o),a=x(n)?n(e[1]):n[e[1]];if(a!=null){var i=e[6],u=e[5],l=e[4],p=a;u==0&&l&&(p=this.indentPartial(a,l,i));var y=this.parse(p,s);return this.renderTokens(y,t,n,p,o)}}};f.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(n!=null)return n};f.prototype.escapedValue=function(e,t,n){var o=this.getConfigEscape(n)||d.escape,s=t.lookup(e[1]);if(s!=null)return typeof s=="number"&&o===d.escape?String(s):o(s)};f.prototype.rawValue=function(e){return e[1]};f.prototype.getConfigTags=function(e){return P(e)?e:e&&typeof e=="object"?e.tags:void 0};f.prototype.getConfigEscape=function(e){if(e&&typeof e=="object"&&!P(e))return e.escape};var d={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(r){k.templateCache=r},get templateCache(){return k.templateCache}},k=new f;d.clearCache=function(){return k.clearCache()};d.parse=function(e,t){return k.parse(e,t)};d.render=function(e,t,n,o){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+ue(e)+'" was given as the first argument for mustache#render(template, view, partials)');return k.render(e,t,n,o)};d.escape=de;d.Scanner=M;d.Context=S;d.Writer=f;class Y{constructor(e,t){this.template=e,this.state=t,this.ast=d.parse(e)}getValue(){return this.value===void 0&&(this.value=d.render(this.template,this.state)),this.value}onChange(e){const t=[];for(const n of this.getUsedVariables().values())t.push(this.state.onVariableChange(n).subscribe(()=>{const o=d.render(this.template,this.state);o!==this.value&&(this.value=o,e(this.value))}));return{unsubscribe:()=>{for(const n of t)n.unsubscribe()}}}isPureString(){return this.ast.length===0||this.ast.length===1&&this.ast[0][0]==="text"}getUsedVariables(){const e=new Set;return this.recursiveGetUsedVariables(this.ast,e),e}recursiveGetUsedVariables(e,t){for(const n of e){const o=n[0],s=n[1],a=n[4];["name","&","#","^"].includes(o)&&t.add(s),a!==void 0&&typeof a!="string"&&this.recursiveGetUsedVariables(a,t)}}}async function Se(){var r;const e=await se();for(const t of e){const n=(r=t.properties)!==null&&r!==void 0?r:[];for(const o of n){if(o.type==="int"||o.type==="bool"||o.type==="object"||typeof o.value!="string")continue;const s=new Y(o.value,WA.state);if(s.isPureString())continue;const a=s.getValue();await q(t.name,o.name,a),s.onChange(async i=>{await q(t.name,o.name,i)})}}}async function Pe(){var r;const e=await T();for(const[t,n]of e.entries())if(n.type!=="objectgroup"){const o=(r=n.properties)!==null&&r!==void 0?r:[];for(const s of o){if(s.type==="int"||s.type==="bool"||s.type==="object"||typeof s.value!="string")continue;const a=new Y(s.value,WA.state);if(a.isPureString())continue;const i=a.getValue();K(t,s.name,i),a.onChange(u=>{K(t,s.name,u)})}}}async function q(r,e,t){console.log(r),(await WA.room.area.get(r)).setProperty(e,t)}function K(r,e,t){WA.room.setProperty(r,e,t),e==="visible"&&(t?WA.room.showLayer(r):WA.room.hideLayer(r))}let I,_=0,U=0;function N(r){if(WA.state[r.name]){let e=r.properties.mustGetString("openLayer");for(const t of e.split(`
`))WA.room.showLayer(t);e=r.properties.mustGetString("closeLayer");for(const t of e.split(`
`))WA.room.hideLayer(t)}else{let e=r.properties.mustGetString("openLayer");for(const t of e.split(`
`))WA.room.hideLayer(t);e=r.properties.mustGetString("closeLayer");for(const t of e.split(`
`))WA.room.showLayer(t)}}function Le(r){const e=r.properties.getString("openSound"),t=r.properties.getNumber("soundRadius");let n=1;if(t){const o=Q(r.properties.mustGetString("openLayer").split(`
`));if(o>t)return;n=1-o/t}e&&WA.sound.loadSound(e).play({volume:n})}function Ee(r){const e=r.properties.getString("closeSound"),t=r.properties.getNumber("soundRadius");let n=1;if(t){const o=Q(r.properties.mustGetString("closeLayer").split(`
`));if(o>t)return;n=1-o/t}e&&WA.sound.loadSound(e).play({volume:n})}function J(r){return r.map(e=>I.get(e)).filter(e=>(e==null?void 0:e.type)==="tilelayer")}function Q(r){const e=J(r),t=X(e),n=((t.right-t.left)/2+t.left)*32,o=((t.bottom-t.top)/2+t.top)*32;return Math.sqrt(Math.pow(_-n,2)+Math.pow(U-o,2))}function Ce(r){WA.state.onVariableChange(r.name).subscribe(()=>{WA.state[r.name]?Le(r):Ee(r),N(r)}),N(r)}function ke(r,e,t,n){const o=r.name;let s,a,i=!1;const u=t.getString("tag");let l=!0;u&&!WA.player.tags.includes(u)&&(l=!1);const p=!!u;function y(){var c;s&&s.remove(),s=WA.ui.displayActionMessage({message:(c=t.getString("closeTriggerMessage"))!==null&&c!==void 0?c:"Press SPACE to close the door",callback:()=>{WA.state[e.name]=!1,m()}})}function m(){var c;s&&s.remove(),s=WA.ui.displayActionMessage({message:(c=t.getString("openTriggerMessage"))!==null&&c!==void 0?c:"Press SPACE to open the door",callback:()=>{WA.state[e.name]=!0,y()}})}function B(c){const v=X(J(e.properties.mustGetString("closeLayer").split(`
`)));a=WA.room.website.create({name:"doorKeypad"+c,url:n+"/keypad.html#"+encodeURIComponent(c),position:{x:v.right*32,y:v.top*32,width:32*3,height:32*4},allowApi:!0})}function L(){a&&(WA.room.website.delete(a.name),a=void 0)}WA.room.onEnterLayer(o).subscribe(()=>{if(i=!0,t.getBoolean("autoOpen")&&l){WA.state[e.name]=!0;return}if(!WA.state[e.name]&&(p&&!l||!p)&&(t.getString("code")||t.getString("codeVariable"))){B(o);return}l&&(WA.state[e.name]?y():m())}),WA.room.onLeaveLayer(o).subscribe(()=>{i=!1,t.getBoolean("autoClose")&&(WA.state[e.name]=!1),s&&s.remove(),L()}),WA.state.onVariableChange(e.name).subscribe(()=>{i&&(!t.getBoolean("autoClose")&&WA.state[e.name]===!0&&y(),a&&WA.state[e.name]===!0&&L(),!t.getBoolean("autoOpen")&&WA.state[e.name]===!1&&m())})}function Te(r){const e=r.properties.mustGetString("bellSound"),t=r.properties.getNumber("soundRadius");let n=1;if(t){const o=Math.sqrt(Math.pow(r.x-_,2)+Math.pow(r.y-U,2));if(o>t)return;n=1-o/t}WA.sound.loadSound(e).play({volume:n})}function Me(r){WA.state[r.name]===void 0&&(WA.state[r.name]=0),WA.state.onVariableChange(r.name).subscribe(()=>{WA.state[r.name]&&Te(r)})}function Be(r,e,t){let n;const o=e.getString("bellPopup");WA.room.onEnterLayer(t).subscribe(()=>{var s;o?n=WA.ui.openPopup(o,"",[{label:(s=e.getString("bellButtonText"))!==null&&s!==void 0?s:"Ring",callback:()=>{WA.state[r]=WA.state[r]+1}}]):WA.state[r]=WA.state[r]+1}),WA.room.onLeaveLayer(t).subscribe(()=>{n&&(n.close(),n=void 0)})}async function Re(r){r=r??j;const e=await re();I=await T();for(const t of e.values())t.properties.get("door")&&Ce(t),t.properties.get("bell")&&Me(t);for(const t of I.values()){const n=new C(t.properties),o=n.getString("doorVariable");if(o&&t.type==="tilelayer"){const a=e.get(o);if(a===void 0)throw new Error('Cannot find variable "'+o+'" referred in the "doorVariable" property of layer "'+t.name+'"');ke(t,a,n,r)}const s=n.getString("bellVariable");s&&Be(s,n,t.name)}WA.player.onPlayerMove(t=>{_=t.x,U=t.y})}function Ve(r,e){const t=r.getString("bindVariable");if(t){const n=r.get("enterValue"),o=r.get("leaveValue"),s=r.getString("triggerMessage"),a=r.getString("tag");De(t,e,n,o,s,a)}}function De(r,e,t,n,o,s){s&&!WA.player.tags.includes(s)||(t!==void 0&&WA.room.onEnterLayer(e).subscribe(()=>{o||(WA.state[r]=t)}),n!==void 0&&WA.room.onLeaveLayer(e).subscribe(()=>{WA.state[r]=n}))}async function Ge(){const r=await T();for(const e of r.values()){const t=new C(e.properties);Ve(t,e.name)}}let Z;async function Ie(r){const e=await WA.room.getTiledMap();r=r??j,Z=await T();const t=e.layers.find(n=>n.name==="configuration");if(t){const o=new C(t.properties).getString("tag");(!o||WA.player.tags.includes(o))&&WA.ui.registerMenuCommand("Configure the room",()=>{WA.nav.openCoWebSite(r+"/configuration.html",!0)});for(const s of Z.values()){const a=new C(s.properties),i=a.getString("openConfig");i&&s.type==="tilelayer"&&je(i.split(","),s.name,a)}}}function je(r,e,t){let n;const o=t.getString("openConfigAdminTag");let s=!0;o&&!WA.player.tags.includes(o)&&(s=!1);function a(){var u;n&&n.remove(),n=WA.ui.displayActionMessage({message:(u=t.getString("openConfigTriggerMessage"))!==null&&u!==void 0?u:"Press SPACE or touch here to configure",callback:()=>O(r)})}function i(){WA.nav.closeCoWebSite()}WA.room.onEnterLayer(e).subscribe(()=>{const u=t.getString("openConfigTrigger");s&&(u&&u==="onaction"?a():O(r))}),WA.room.onLeaveLayer(e).subscribe(()=>{n&&n.remove(),i()})}function xe(){return WA.onInit().then(()=>{Re().catch(r=>console.error(r)),Ge().catch(r=>console.error(r)),Ie().catch(r=>console.error(r)),Pe().catch(r=>console.error(r)),Se().catch(r=>console.error(r))}).catch(r=>console.error(r))}console.log("Script started successfully");let h;WA.onInit().then(()=>{console.log("Scripting API ready"),console.log("Player tags: ",WA.player.tags),WA.chat.sendChatMessage("Willkommen im Sorgen-Tagebuch Büro!","Sorgen-Tagebuch Bot"),WA.chat.sendChatMessage("Es gibt verschiedene Bereiche - laufe auf Türen oder Treppen zu, um dich durch das Büro und die Straßen zu bewegen.","Sorgen-Tagebuch Bot"),window.setTimeout(function(){fetch("https://www.sorgen-tagebuch.de/api/get/statistics").then(t=>t.json()).then(t=>{console.log(t);var n=Math.floor(Math.random()*6),o="";switch(n){case 0:o="Übrigens: Insgesamt wurden "+parseFloat(t.char_total).toLocaleString("de-DE")+" Zeichen im Tagebuch geschrieben.";break;case 1:o="Übrigens: Insgesamt wurden "+parseFloat(t.word_total).toLocaleString("de-DE")+" Wörter im Tagebuch geschrieben.";break;case 2:o="Übrigens: Aktuell habt der Sorgen-Tagebuch e.V. aktuell "+t.moderators_total+" Tagebuchautor:innen.";break;case 3:o="Übrigens: Aktuell wurden im Tagebuch "+parseFloat(t.entries_total).toLocaleString("de-DE")+" Einträge geschrieben.";break;case 4:o="Übrigens: Aktuell beträgt die durchschnittliche Bewertung durch Nutzer:innen "+parseFloat(t.feedbacks_avg).toLocaleString("de-DE")+" Sterne.";break;case 5:o="Übrigens: Aktuell beträgt die durchschnittliche Antwortzeit "+parseFloat(t.response_avg).toLocaleString("de-DE")+" Stunden.";break}WA.chat.sendChatMessage(o,"Sorgen-Tagebuch Bot")})},7e3);var r=0,e=["Vorsicht, Auto!","Pass doch auf!","Dass passiert dir öfter, oder?","Du wurdest schon vier mal beinahe überfahren!","Das kann auf Dauer nicht gesund sein!","Wir haben keine Krankenstation im digtialen Büro!","Du hast offenbar sieben Leben.","Vorsicht im Straßenverkehr!"];WA.room.area.onEnter("car1").subscribe(()=>{r>e.length-1&&(r=e.length-1),h=WA.ui.openPopup("car1Popup",e[r],[]),r++}),WA.room.area.onLeave("car1").subscribe(A),WA.room.area.onEnter("car2").subscribe(()=>{r>e.length-1&&(r=e.length-1),h=WA.ui.openPopup("car2Popup",e[r],[]),r++}),WA.room.area.onLeave("car2").subscribe(A),WA.room.area.onEnter("officeArea").subscribe(()=>{h=WA.ui.openPopup("officePopup","Fragen? Du erreichst Patricia per E-Mail unter lorenzp@sorgen-tagebuch.de, auf Slack als @lorenzp oder Telefonisch unter 07633 80 69 322.",[])}),WA.room.area.onLeave("officeArea").subscribe(A),WA.room.area.onEnter("doorLibrary").subscribe(()=>{h=WA.ui.openPopup("doorLibrarySign","Pssst. In der Bibliothek bitte Ruhe!",[])}),WA.room.area.onLeave("doorLibrary").subscribe(A),WA.room.area.onEnter("firstFloor").subscribe(()=>{h=WA.ui.openPopup("firstFloorSign","Im ersten Stock wird noch umgebaut. Komm später wieder.",[])}),WA.room.area.onLeave("firstFloor").subscribe(A),WA.room.area.onEnter("tecRoom").subscribe(()=>{h=WA.ui.openPopup("tecPopup","Hier gibt es nichts zu sehen.",[])}),WA.room.area.onLeave("tecRoom").subscribe(A),WA.room.area.onEnter("market").subscribe(()=>{h=WA.ui.openPopup("marketPopup","Gerade geschlossen.",[])}),WA.room.area.onLeave("market").subscribe(A),WA.room.area.onEnter("roadSign").subscribe(()=>{h=WA.ui.openPopup("roadPopup","Zum Büro geht es rechts entlang, durch die linke Türe des Gebäudes.",[])}),WA.room.area.onLeave("roadSign").subscribe(A),WA.room.area.onEnter("watertower").subscribe(()=>{h=WA.ui.openPopup("towerPopup","Betreten der Plattform verboten.",[])}),WA.room.area.onLeave("watertower").subscribe(A),WA.room.area.onEnter("dangerZone").subscribe(()=>{h=WA.ui.openPopup("dangerPopup","Was ist hier nur passiert?",[])}),WA.room.area.onLeave("dangerZone").subscribe(A),WA.room.area.onEnter("busStation").subscribe(()=>{const n=new Date().getHours()-1;h=WA.ui.openPopup("busPopup","Der letzte Bus kam um "+n+" Uhr",[])}),WA.room.area.onLeave("busStation").subscribe(A),xe().then(()=>{console.log("Scripting API Extra ready")}).catch(t=>console.error(t))}).catch(r=>console.error(r));function A(){h!==void 0&&(h.close(),h=void 0)}
